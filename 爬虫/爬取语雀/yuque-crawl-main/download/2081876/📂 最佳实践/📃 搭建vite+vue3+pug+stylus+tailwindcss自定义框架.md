æœ¬æ–‡æ­å»ºé¡¹ç›®ä½¿ç”¨çš„ç¯å¢ƒï¼š
```javascript
â¯ node -v
v16.13.1

â¯ npm -v
8.1.2

â¯ yarn -v
1.15.2


â¯ yarn config list
yarn config v1.15.2
info yarn config
{
  'version-tag-prefix': 'v',
  'version-git-tag': true,
  'version-commit-hooks': true,
  'version-git-sign': false,
  'version-git-message': 'v%s',
  'init-version': '1.0.0',
  'init-license': 'MIT',
  'save-prefix': '^',
  'bin-links': true,
  'ignore-scripts': false,
  'ignore-optional': false,
  registry: 'https://registry.yarnpkg.com',
  'strict-ssl': true,
  'user-agent': 'yarn/1.15.2 npm/? node/v16.13.1 win32 x64',
  email: '731734107@qq.com',
  lastUpdateCheck: 1641975096604,
  username: 'quanzaiyu'
}
info npm config
{
  registry: 'http://registry.npm.taobao.org',
  disturl: 'https://npm.taobao.org/dist',
  'chromedriver-cdnurl': 'https://npm.taobao.org/mirrors/chromedriver',
  'couchbase-binary-host-mirror': 'https://npm.taobao.org/mirrors/couchbase/v{version}',
  'debug-binary-host-mirror': 'https://npm.taobao.org/mirrors/node-inspector',
  'electron-mirror': 'https://npm.taobao.org/mirrors/electron/',
  'flow-bin-binary-host-mirror': 'https://npm.taobao.org/mirrors/flow/v',
  'fse-binary-host-mirror': 'https://npm.taobao.org/mirrors/fsevents',
  'fuse-bindings-binary-host-mirror': 'https://npm.taobao.org/mirrors/fuse-bindings/v{version}',
  'git4win-mirror': 'https://npm.taobao.org/mirrors/git-for-windows',
  'gl-binary-host-mirror': 'https://npm.taobao.org/mirrors/gl/v{version}',
  'grpc-node-binary-host-mirror': 'https://npm.taobao.org/mirrors',
  'hackrf-binary-host-mirror': 'https://npm.taobao.org/mirrors/hackrf/v{version}',
  'python-mirror': 'https://npm.taobao.org/mirrors/python',
  'rabin-binary-host-mirror': 'https://npm.taobao.org/mirrors/rabin/v{version}',
  'sass-binary-site': 'https://npm.taobao.org/mirrors/node-sass',
  'sodium-prebuilt-binary-host-mirror': 'https://npm.taobao.org/mirrors/sodium-prebuilt/v{version}',
  'sqlite3-binary-site': 'https://npm.taobao.org/mirrors/sqlite3',
  'utf-8-validate-binary-host-mirror': 'https://npm.taobao.org/mirrors/utf-8-validate/v{version}',
  'utp-native-binary-host-mirror': 'https://npm.taobao.org/mirrors/utp-native/v{version}',
  'zmq-prebuilt-binary-host-mirror': 'https://npm.taobao.org/mirrors/zmq-prebuilt/v{version}'
}Done in 0.08s.

â¯ npm config list
; "user" config from C:\Users\quanz\.npmrc
chromedriver-cdnurl = "https://npm.taobao.org/mirrors/chromedriver" couchbase-binary-host-mirror = "https://npm.taobao.org/mirrors/couchbase/v{version}" debug-binary-host-mirror = "https://npm.taobao.org/mirrors/node-inspector" disturl = "https://npm.taobao.org/dist" 
electron-mirror = "https://npm.taobao.org/mirrors/electron/" 
flow-bin-binary-host-mirror = "https://npm.taobao.org/mirrors/flow/v" 
fse-binary-host-mirror = "https://npm.taobao.org/mirrors/fsevents" 
fuse-bindings-binary-host-mirror = "https://npm.taobao.org/mirrors/fuse-bindings/v{version}" 
git4win-mirror = "https://npm.taobao.org/mirrors/git-for-windows" 
gl-binary-host-mirror = "https://npm.taobao.org/mirrors/gl/v{version}"
grpc-node-binary-host-mirror = "https://npm.taobao.org/mirrors"
hackrf-binary-host-mirror = "https://npm.taobao.org/mirrors/hackrf/v{version}"
leveldown-binary-host-mirror = "https://npm.taobao.org/mirrors/leveldown/v{version}"
leveldown-hyper-binary-host-mirror = "https://npm.taobao.org/mirrors/leveldown-hyper/v{version}"
mknod-binary-host-mirror = "https://npm.taobao.org/mirrors/mknod/v{version}"
node-sqlite3-binary-host-mirror = "https://npm.taobao.org/mirrors"
node-tk5-binary-host-mirror = "https://npm.taobao.org/mirrors/node-tk5/v{version}"
nodegit-binary-host-mirror = "https://npm.taobao.org/mirrors/nodegit/v{version}/"
operadriver-cdnurl = "https://npm.taobao.org/mirrors/operadriver"
phantomjs-cdnurl = "https://npm.taobao.org/mirrors/phantomjs"
profiler-binary-host-mirror = "https://npm.taobao.org/mirrors/node-inspector/"
puppeteer-download-host = "https://npm.taobao.org/mirrors"

python-mirror = "https://npm.taobao.org/mirrors/python"   
rabin-binary-host-mirror = "https://npm.taobao.org/mirrors/rabin/v{version}"
registry = "http://registry.npm.taobao.org/"
sass-binary-site = "https://npm.taobao.org/mirrors/node-sass"
sodium-prebuilt-binary-host-mirror = "https://npm.taobao.org/mirrors/sodium-prebuilt/v{version}"
sqlite3-binary-site = "https://npm.taobao.org/mirrors/sqlite3"
utf-8-validate-binary-host-mirror = "https://npm.taobao.org/mirrors/utf-8-validate/v{version}"
utp-native-binary-host-mirror = "https://npm.taobao.org/mirrors/utp-native/v{version}"
zmq-prebuilt-binary-host-mirror = "https://npm.taobao.org/mirrors/zmq-prebuilt/v{version}"

; node bin location = C:\Program Files\nodejs\node.exe    
; cwd = D:\Projects\_test\_NestjsProjects\nest-project    
; HOME = C:\Users\quanz
; Run `npm config ls -l` to show all defaults.
```

<a name="v6zf3"></a>
## ä¸€ã€é€šè¿‡viteæ­å»ºé¡¹ç›®

- [viteå®˜ç½‘](https://cn.vitejs.dev/)ã€[Docsï¼šGitHub](https://github.com/vitejs/docs-cn)ã€‘ã€[viteï¼šGitHub](https://github.com/vitejs/vite)ã€‘

åˆ›å»ºé¡¹ç›®ï¼š
```javascript
$ yarn create vite
yarn create v1.15.2
[1/4] Resolving packages...
[2/4] Fetching packages...
info fsevents@1.2.13: The platform "win32" is incompatible with this module.
info "fsevents@1.2.13" is an optional dependency and failed compatibility check. Excluding it from installation.
info fsevents@2.3.2: The platform "win32" is incompatible with this module.
info "fsevents@2.3.2" is an optional dependency and failed compatibility check. Excluding it from installation.
[3/4] Linking dependencies...
[4/4] Building fresh packages...

success Installed "create-vite@2.7.2" with binaries:
      - create-vite
      - cva
âˆš Project name: ... vite-vue3
âˆš Select a framework: Â» vue
âˆš Select a variant: Â» vue

Scaffolding project in D:\Projects\_test\_ViteProjects\vite-vue3...

Done. Now run:

  cd vite-vue3
  npm install
  npm run dev

Done in 22.24s.
```
æˆ–è€…é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯ç›´æ¥ä½¿ç”¨vue3æ¨¡æ¿è¿›è¡Œé¡¹ç›®åˆ›å»ºï¼š
```javascript
yarn create vite vite-vue3 --template vue
```
åç»­æ­¥éª¤ä¹Ÿå¾ˆæ¸…æ¥šäº†ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•å®‰è£…ä¾èµ–ï¼š
```javascript
cd vite-vue3
yarn
yarn dev
```
é»˜è®¤é¡¹ç›®ä¼šè·‘åˆ°æœ¬åœ°3000ç«¯å£ï¼Œæµè§ˆå™¨é€šè¿‡ [http://localhost:3000](http://localhost:3000/) è®¿é—®ã€‚

<a name="PvaJl"></a>
## äºŒã€ç›®å½•ç»“æ„è§„åˆ’åŠé¡¹ç›®åŸºæœ¬é…ç½®
ä»¥ä¸‹æ˜¯æˆ‘çš„é¡¹ç›®ç›®å½•ç»“æ„è§„åˆ’ï¼Œåªåˆ—ä¸¾ä¸€äº›æ¯”è¾ƒé‡è¦çš„ç›®å½•å’Œæ–‡ä»¶ï¼š<br />![Snipaste_2022-01-13_10-46-09.png](https://cdn.nlark.com/yuque/0/2022/png/2213540/1642042071030-7b6f6edc-8830-40ad-9432-1a76417ff1fe.png#clientId=ueee78a94-9397-4&from=drop&id=u6bff57e3&originHeight=631&originWidth=240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10719&status=done&style=none&taskId=u4d722174-ce04-41f4-b5f5-84b37375337&title=)<br />ä¸ºäº†æ–¹ä¾¿å¯¹æ¯”ï¼Œæˆ‘æŠŠé¡¹ç›®åˆšåˆ›å»ºå®Œåçš„ç›®å½•ç»“æ„ä¹Ÿç²˜äº†å‡ºæ¥ï¼š<br />![Snipaste_2022-01-13_10-49-02.png](https://cdn.nlark.com/yuque/0/2022/png/2213540/1642042171583-a4561d98-a669-46c8-98f8-ee7bf80b5a02.png#clientId=ueee78a94-9397-4&from=drop&id=u5da8a7fa&originHeight=318&originWidth=184&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4864&status=done&style=none&taskId=uc872dd99-32e6-4a6d-8144-87760bfc752&title=)

é¡¹ç›®åˆ›å»ºä¹‹åˆçš„`package.json`å¦‚ä¸‹ï¼š
```json
{
  "name": "vite-vue3",
  "version": "0.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "vue": "^3.2.25"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^2.0.0",
    "vite": "^2.7.2"
  }
}
```
å¯ä»¥çœ‹åˆ°ä¾èµ–å¾ˆå°‘ï¼Œä¹Ÿåªæœ‰ä¸‰ä¸ªå¯æ‰§è¡Œçš„å‘½ä»¤ã€‚

åˆå§‹çš„`vite.config.js`é…ç½®å¦‚ä¸‹ï¼š
```json
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [vue()]
})
```
ä¸ºäº†åé¢ä½¿ç”¨è·¯å¾„æ–¹ä¾¿ï¼Œå¯ä»¥æ·»åŠ  `@`åˆ«åè§£æï¼š
```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'
import { base } from './src/config'

export default defineConfig({
  base,
  plugins: [
    vue({
      reactivityTransform: true,
      refSugar: true
    })
  ],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src'),
    }
  },
})
```

è¿è¡Œdevæ—¶ï¼Œé»˜è®¤å®‰è£…æ–°ä¾èµ–éœ€è¦é‡å¯ï¼Œå¦‚æœæƒ³è¦å®æ—¶å®‰è£…ä¾èµ–å¹¶ç”Ÿæ•ˆï¼Œå¯ä»¥å°†devä¿®æ”¹ä¸ºï¼š
```json
{
  "scripts": {
    "dev": "vite --force",
  }
}
```
è¿™æ˜¯å®˜æ–¹åŸè¯ï¼š
```json
Vite ä¼šå°†é¢„æ„å»ºçš„ä¾èµ–ç¼“å­˜åˆ° node_modules/.viteã€‚å®ƒæ ¹æ®å‡ ä¸ªæºæ¥å†³å®šæ˜¯å¦éœ€è¦é‡æ–°è¿è¡Œé¢„æ„å»ºæ­¥éª¤:

package.json ä¸­çš„ dependencies åˆ—è¡¨
- åŒ…ç®¡ç†å™¨çš„ lockfileï¼Œä¾‹å¦‚ package-lock.json, yarn.lockï¼Œæˆ–è€… pnpm-lock.yaml
- å¯èƒ½åœ¨ vite.config.js ç›¸å…³å­—æ®µä¸­é…ç½®è¿‡çš„
- åªæœ‰åœ¨ä¸Šè¿°å…¶ä¸­ä¸€é¡¹å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œæ‰éœ€è¦é‡æ–°è¿è¡Œé¢„æ„å»ºã€‚

å¦‚æœå‡ºäºæŸäº›åŸå› ï¼Œä½ æƒ³è¦å¼ºåˆ¶ Vite é‡æ–°æ„å»ºä¾èµ–ï¼Œä½ å¯ä»¥ç”¨ --force å‘½ä»¤è¡Œé€‰é¡¹å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæˆ–è€…æ‰‹åŠ¨åˆ é™¤ node_modules/.vite ç›®å½•ã€‚
```
å‚è€ƒï¼š[viteå®˜æ–¹æ–‡æ¡£ï¼šæ–‡ä»¶ç³»ç»Ÿç¼“å­˜](https://cn.vitejs.dev/guide/dep-pre-bundling.html#file-system-cache)

åˆå§‹çš„`main.js`é•¿è¿™æ ·ï¼š
```javascript
import { createApp } from 'vue'
import App from './App.vue'

let app = createApp(App)

app.mount('#app')

// æŒ‚è½½åˆ°å…¨å±€
window.app = app
```
æˆ‘åœ¨è¿™é‡Œç¨å¾®æ”¹é€ äº†ä¸€ä¸‹ï¼Œå°†vueçš„å®ä¾‹æŒ‚è½½åˆ°äº†windowä¸‹ï¼Œä»¥æ–¹ä¾¿åç»­åœ¨æµè§ˆå™¨ä¸­çš„è°ƒè¯•ã€‚

<a name="Ua1NJ"></a>
## ä¸‰ã€é›†æˆpugä¸stylus

- [Pugå®˜ç½‘](https://pugjs.org/)ã€[npm](https://www.npmjs.com/package/pug)ã€‘ã€[GitHub](https://github.com/pugjs/pug)ã€‘
- [Styluså®˜ç½‘](https://www.stylus-lang.cn/)ã€[GitHub](https://github.com/stylus/stylus/)ã€‘

æˆ‘æ˜¯æ¯”è¾ƒå–œæ¬¢ä½¿ç”¨pugä½œä¸ºæ¨¡æ¿å¼•æ“çš„ï¼Œå–œæ¬¢stylusä½œä¸ºæ ·å¼é¢„å¤„ç†å™¨ã€‚

è¿™æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œviteæ˜¯å¼€ç®±å³ç”¨çš„ï¼Œç›´æ¥å®‰è£…å³å¯ä½¿ç”¨ï¼Œéƒ½ä¸éœ€è¦é¢å¤–é…ç½®ï¼š
```javascript
yarn add pug stylus -D
```
é‡æ–°è¿è¡Œé¡¹ç›®ï¼Œæµ‹è¯•æ˜¯å¦ç”Ÿæ•ˆï¼š
```vue
<template lang="pug">
div 123
</template>

<script setup>
</script>

<style scoped lang='stylus'>
div
  color red
</style>
```

å¦‚æœå¤§å®¶å–œæ¬¢ä½¿ç”¨sassæˆ–lessä½œä¸ºé¢„ç¼–è¯‘å™¨ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚

- [lesså®˜ç½‘](https://less.bootcss.com/)ã€[lessï¼šGitHub](https://github.com/less/less.js)ã€‘
- [sassä¸­æ–‡ç½‘](https://www.sass.hk/)

viteæ˜¯å¼€ç®±å³ç”¨çš„ï¼Œåªéœ€è¦å®‰è£…sassæˆ–lesså³å¯ï¼š
```vue
yarn add less sass -D
```
æµ‹è¯•lessï¼š
```vue
<template lang="pug">
.a
  .b 123
</template>

<script setup>
</script>

<style scoped lang='less'>
.a {
  .b {
    color: red;
  }
}
</style>
```
æµ‹è¯•scssï¼š
```vue
<template lang="pug">
.a
  .b 123
</template>

<script setup>
</script>

<style scoped lang='scss'>
$color: red;
.a {
  .b {
    color: $color;
  }
}
</style>
```
æµ‹è¯•sassï¼š
```vue
<template lang="pug">
.a
  .b 123
</template>

<script setup>
</script>

<style scoped lang='sass'>
$color: red
.a
  .b
    color: $color
</style>
```

ç›¸å…³å·¥å…·ï¼š

- [Sassã€Lessåœ¨çº¿è½¬æ¢å·¥å…·](https://www.sass.hk/css2sass/)

<a name="Lrn2g"></a>
## å››ã€é›†æˆtailwindcss

- [tailwindcsså®˜ç½‘](https://tailwindcss.com/) ã€[GitHub](https://github.com/tailwindlabs/tailwindcss)ã€‘

å®‰è£…ä¾èµ–ï¼š
```json
yarn add -D tailwindcss@latest postcss@latest autoprefixer@latest
```
ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š
```json
$ npx tailwindcss init -p
Created Tailwind CSS config file: tailwind.config.js
Created PostCSS config file: postcss.config.js
```
å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ï¼š`tailwind.config.js`å’Œ `postcss.config.js`ï¼Œä¸€ä¸ªæ˜¯tailwindcssçš„é…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯postcssçš„é…ç½®æ–‡ä»¶ã€‚


å¯ä»¥çœ‹åˆ°åœ¨ `postcss.config.js`ä¸­å¼•å…¥äº† `tailwindcss`å’Œ `autoprefixer`ï¼š
```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
```

ä¿®æ”¹`tailwind.config.js`çš„é…ç½®ï¼š
```javascript
module.exports = {
  content: ['./index.html', './src/**/*.{vue,js,ts,jsx,tsx}'],
  media: false,
  theme: {
    extend: {},
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
```
å…¶ä¸­ content é€‰é¡¹è¡¨åå¯¹å“ªäº›æ–‡ä»¶åº”ç”¨ tailwindcss æ ·å¼è§„åˆ™ã€‚<br />æ³¨æ„ï¼š

- purgeåœ¨tailwindcss3.0ä¸­æ”¹ä¸ºäº†content
- darkModeåœ¨tailwindcss3.0ä¸­æ”¹ä¸ºäº† 'media' or 'class'

æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `index.css`å¼•å…¥tailwindcssåŸºç¡€æ ·å¼ã€ç»„ä»¶å’ŒåŠŸèƒ½ï¼š
```javascript
/* ./src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;
```
åœ¨`main.js`ä¸­å¼•å…¥æ­¤æ–‡ä»¶ï¼š
```javascript
import './index.css'
```

åœ¨æ¨¡æ¿ä¸­éªŒè¯ï¼š
```vue
<template lang="pug">
.bg-red-50.text-green-300 12345
</template>
```

å‚è€ƒï¼š

- [Install Tailwind CSS with Vue 3 and Vite](https://tailwindcss.com/docs/guides/vite)
- [åœ¨ Vue 3 å’Œ Vite å®‰è£… Tailwind CSS](https://www.tailwindcss.cn/docs/guides/vue-3-vite)

<a name="uREck"></a>
## äº”ã€é›†æˆå„ç§ä»£ç éªŒè¯ä¿®å¤å·¥å…·
<a name="YO74t"></a>
### eslint
eslinté…ç½®å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œé…ç½®ï¼Œä»¥ä¸‹ä¸ºæˆ‘çš„é…ç½®æ–¹å¼ã€‚<br />å¼•å…¥ä¾èµ–ï¼š
```vue
yarn add -D eslint eslint-plugin-vue
```
åˆ›å»ºeslinté…ç½®æ–‡ä»¶ `.eslintrc.js`
```javascript
module.exports = {
  root: true,
  env: { node: true },
  extends: ['plugin:vue/essential', 'eslint:recommended'],
  parserOptions: {
    ecmaFeatures: {
      // æ”¯æŒè£…é¥°å™¨
      legacyDecorators: true
    }
  },
  globals: {
    dayjs: 'readonly'
  },
  rules: {
    indent: ['error', 2, { SwitchCase: 1, flatTernaryExpressions: false }],
    semi: [2, 'never'],
    quotes: [2, 'single'],
    eqeqeq: 1,
    curly: [2, 'multi-line'],
    'no-console': [1, { allow: ['info', 'warn', 'error'] }],
    'no-debugger': 1,
    'no-alert': 1,
    'padded-blocks': [2, 'never'],
    'key-spacing': 2,
    'keyword-spacing': 2,
    'eol-last': 2,
    // 'array-element-newline': [1, 'always'],
    'linebreak-style': [2, 'windows'],
    'array-callback-return': 2,
    'block-scoped-var': 2,
    'no-empty': 2,
    'no-empty-function': 2,
    'no-empty-pattern': 2,
    'no-var': 2,
    'no-void': 2,
    'no-eval': 2,
    'no-tabs': 2,
    'no-unused-vars': 1,
    'no-case-declarations': 0,
    'no-div-regex': 2,
    'no-multi-spaces': 2,
    'no-trailing-spaces': 2,
    'no-eq-null': 2,
    'no-unneeded-ternary': 2,
    'no-mixed-spaces-and-tabs': 2,
    'no-whitespace-before-property': 2,
    'no-multiple-empty-lines': [2, { max: 1 }],
    'nonblock-statement-body-position': 2,
    'dot-location': [2, 'property'],
    'dot-notation': [2, { allowKeywords: true }],
    'func-style': 0,
    'func-call-spacing': 2,
    'func-names': [2, 'never'],
    'function-paren-newline': 2,
    'line-comment-position': 0,
    'lines-around-comment': 0,
    'lines-between-class-members': 2,
    'space-infix-ops': 2,
    'space-unary-ops': 2,
    'spaced-comment': 2,
    'space-before-blocks': 2,
    'space-in-parens': [2, 'never'],
    'space-before-function-paren': [2, 'never'],
    'one-var': [2, 'never'],
    'one-var-declaration-per-line': 2,
    'multiline-comment-style': 0,
    'consistent-return': 0,
    'object-curly-spacing': [2, 'always'],
    'object-curly-newline': [0, { multiline: true, minProperties: 1 }],
    'array-bracket-spacing': [2, 'never'],
    'prefer-promise-reject-errors': 0,
    'implicit-arrow-linebreak': 2,
    'default-case': 0,
    'switch-colon-spacing': 2,
    'template-tag-spacing': 2,
    'vue/require-valid-default-prop': 0,
    'vue/no-multiple-template-root': 0,
    'vue/multi-word-component-names': 0,
    'vue/valid-template-root': 0,
    'comma-style': 2,
    'comma-dangle': [0, 'never'],
    'prefer-object-spread': 2,
    'quote-props': [2, 'as-needed'],
    'no-useless-computed-key': 2,
    'no-useless-constructor': 2,
    'object-shorthand': 2,
    'use-isnan': 0,
    'prefer-arrow-callback': 2
  }
}
```
åœ¨ `vite.config.js`é…ç½®ä¸­å¼•å…¥`vite-plugin-eslint`
```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import eslintPlugin from 'vite-plugin-eslint'
...

export default defineConfig({
  ...,
  plugins: [
    vue({
      reactivityTransform: true,
      refSugar: true
    }),
    eslintPlugin()
  ],
})
```
å¦‚æœæœ‰ä»€ä¹ˆæ–‡ä»¶ä¸æƒ³è¦é€šè¿‡eslintéªŒè¯ï¼Œå¯ä»¥å°†å…¶åŠ å…¥ `.eslintignore`æ–‡ä»¶ä¸­ã€‚

ç»è¿‡ä¸Šé¢çš„é…ç½®ï¼Œåœ¨ç¼–è¾‘å™¨å’Œç¼–è¯‘æ—¶éƒ½ä¼šæŠ¥eslintè­¦å‘Šæˆ–é”™è¯¯ã€‚

å¯ä»¥åœ¨ `package.json`ä¸­æ·»åŠ å‘½ä»¤ï¼š
```javascript
{
  "scripts": {
    ...
    "fix:eslint": "eslint --fix src --ext .js,.vue"
  },
  ...
}

```
è¿™æ ·ï¼Œå¦‚æœæƒ³è¦ä¿®å¤eslinté—®é¢˜æ—¶ï¼Œåªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š
```javascript
yarn fix:eslint
```

<a name="tjKu4"></a>
### stylelint
å¼•å…¥ä¾èµ–ï¼š
```javascript
yarn add -D stylelint stylelint-config-idiomatic-order stylelint-config-recommended stylelint-plugin-stylus
```
å…¶ä¸­ï¼š

- `stylelint-plugin-stylus`ç”¨äºæ”¯æŒstylusçš„éªŒè¯
- `stylelint-config-idiomatic-order`ç”¨äºéªŒè¯æ ·å¼å±æ€§æ’åº
- `stylelint-config-recommended `æ¨èçš„é…ç½®

åˆ›å»ºstylelinté…ç½®æ–‡ä»¶`.stylelintrc.js`
```javascript
module.exports = {
  extends: [
    'stylelint-config-recommended',
    'stylelint-config-idiomatic-order',
    'stylelint-plugin-stylus/standard'
  ],
  plugins: ['stylelint-order'],
  rules: {
    'stylus/selector-type-no-unknown': [
      true,
    ],
    'stylus/at-rule-no-unknown': [
      true,
      {
        ignoreAtRules: [
          'tailwind',
          'layer',
          'apply',
          'variants',
          'responsive',
          'screen'
        ]
      }
    ],
    'stylus/semicolon': ['never'],
    'stylus/number-leading-zero': ['never'],
    'unit-no-unknown': [true, { ignoreUnits: ['rpx'] }],
    'no-descending-specificity': null,
    'no-empty-source': null,
    'font-family-no-missing-generic-family-keyword': null,
    'no-empty-source': null
  }
}
```
å¦‚æœæœ‰ä»€ä¹ˆæ–‡ä»¶ä¸æƒ³è¦é€šè¿‡stylelintéªŒè¯ï¼Œå¯ä»¥å°†å…¶åŠ å…¥ `.stylelintignore`æ–‡ä»¶ä¸­ã€‚

åœ¨ `package.json`ä¸­æ·»åŠ ä¸¤æ¡å‘½ä»¤ï¼Œç”¨äºéªŒè¯å’Œä¿®å¤æ ·å¼é—®é¢˜ï¼š
```json
{
  "scripts": {
    "lint:style": "stylelint --custom-syntax stylelint-plugin-stylus/custom-syntax src/**/*.{vue,css,styl}",
    "fix:style": "stylelint --custom-syntax stylelint-plugin-stylus/custom-syntax src/**/*.{vue,css,styl} --fix"
  }
}
```

<a name="QbTbn"></a>
### prettier
å¼•å…¥ä¾èµ–ï¼š
```javascript
yarn add -D prettier prettier-eslint prettier-eslint-cli
```
åˆ›å»ºprettieré…ç½®æ–‡ä»¶`.prettierrc.json`
```javascript
{
  "printWidth": 120,
  "tabWidth": 2,
  "useTabs": false,
  "singleQuote": true,
  "semi": false,
  "trailingComma": "none",
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "endOfLine": "crlf",
  "htmlWhitespaceSensitivity": "ignore"
}
```
å¦‚æœæœ‰ä»€ä¹ˆæ–‡ä»¶ä¸æƒ³è¦é€šè¿‡prettieræ ¼å¼åŒ–ï¼Œå¯ä»¥å°†å…¶åŠ å…¥ `.prettierignore`æ–‡ä»¶ä¸­ã€‚

åœ¨ `package.json`ä¸­æ·»åŠ ä¸€æ¡å‘½ä»¤ï¼Œç”¨äºPrettieræ ¼å¼åŒ–ä»£ç ï¼š
```json
{
  "scripts": {
    "fix:prettier": "prettier --write src"
  }
}
```

<a name="Z0ALR"></a>
### pug-lint
å¼•å…¥ä¾èµ–ï¼š
```javascript
yarn add pug-lint pug-lint-config-clock pug-lint-vue -D
```
åˆ›å»ºpug-linté…ç½®æ–‡ä»¶`.pug-lintrc.js`
```javascript
module.exports = {
  extends: "clock",
  validateIndentation: 2,
  validateLineBreaks: "CRLF",
  disallowClassAttributeWithStaticValue: true,
}
```

<a name="LmJLq"></a>
## å…­ã€é›†æˆä»£ç æäº¤éªŒè¯å·¥å…·ï¼ˆhuskyï¼‰
å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼Œæœ‰è¯¦ç»†ä»‹ç»ï¼š<br />[ğŸ“ƒ Gitæäº¤ä¿¡æ¯è§„èŒƒåŒ–ä¸è‡ªåŠ¨åŒ–](https://www.yuque.com/xiaoyulive/services/qc4vey?view=doc_embed)

<a name="oUIRZ"></a>
## ä¸ƒã€é›†æˆè·¯ç”±vue-router4

- [vue-routerå®˜ç½‘](https://next.router.vuejs.org/zh/)

å®‰è£…ï¼š
```vue
yarn add vue-router@next
```
å®‰è£…å®Œåï¼Œåœ¨srcä¸‹åˆ›å»ºä¸€ä¸ª`routes`æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»º`index.js`ï¼š
```javascript
import {
  createRouter,
  createWebHistory,
  createWebHashHistory
} from 'vue-router'

import { routerMode, base } from '../config'

const routes = [
  {
    path: '/',
    name: 'index',
    component: () => import('@/pages/index/index.vue'),
  },
  {
    path: '/test',
    name: 'test',
    component: () => import('@/pages/test/test.vue'),
  },
]

const router = createRouter({
  history: routerMode === 'hash' ? createWebHashHistory(base) : createWebHistory(base),
  routes
})

export default router
```
å…¶ä¸­ï¼š

- `base`å¦‚æœåœ¨æœåŠ¡å™¨ä¸­ä½¿ç”¨äº†è·¯å¾„çº§è·¯ç”±ï¼ˆé¡¹ç›®ä¸è¿è¡Œåœ¨æ ¹ä¸‹ï¼‰ï¼Œéœ€è¦é…ç½®base
- `routerMode`è·¯ç”±æ¨¡å¼ï¼Œåˆ†ä¸ºhashæ¨¡å¼å’Œhistoryæ¨¡å¼ï¼Œåˆ†åˆ«ä½¿ç”¨`createWebHashHistory`å’Œ `createWebHistory`åˆ›å»ºè·¯ç”±

å…¶ä¸­ `config.js`ä¸ºå…¬å…±é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹é…ç½®ï¼š
```javascript
// è·¯ç”±æ¨¡å¼: hash / history
export const routerMode = 'history'

// åº”ç”¨çš„åŸºè·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ•´ä¸ªå•é¡µåº”ç”¨æœåŠ¡åœ¨ /app/ ä¸‹ï¼Œç„¶å base å°±åº”è¯¥è®¾ä¸º "/app/"
export const base = '/app/'
```
å¦‚æœå¯ç”¨äº†è·¯å¾„çº§è·¯ç”±ï¼Œç›¸åº”åœ°åœ¨`vite.config.js`ä¸­ä¹Ÿåº”è¯¥é…ç½®ï¼š
```javascript
import { base } from './src/config'

export default defineConfig({
  base,
  ...
})
```

åœ¨`main.js`ä¸­å¼•å…¥è·¯ç”±ï¼š
```javascript
import { createApp } from 'vue'
import router from './routes/index'
import App from './App.vue'

let app = createApp(App)
app.use(router)
app.mount('#app')
```

åœ¨`App.vue`ä¸­ä½¿ç”¨è·¯ç”±è§†å›¾ `router-view`ï¼š
```vue
<template lang='pug'>
router-view
</template>
```

åˆ›å»ºä¸¤ä¸ªé¡µé¢ï¼š`pages/index/index.vue`å’Œ `pages/test/test.vue`
```vue
// pages/index/index.vue
<template lang='pug'>
div
  button(@click='go("test")') test
</template>

<script setup>
import { useRouter } from 'vue-router'

const router = useRouter()

function go(name) {
  router.push({ name })
}
</script>
```
```vue
// pages/test/test.vue
<template lang='pug'>
div
  button(@click='go("index")') index
</template>

<script setup>
import { useRouter } from 'vue-router'

const router = useRouter()

function go(name) {
  router.push({ name })
}
</script>
```
è¿è¡Œé¡¹ç›®åï¼Œå°±å¯ä»¥çœ‹åˆ°è·¯ç”±ç›¸äº’è·³è½¬äº†ã€‚

<a name="DLzsE"></a>
## å…«ã€é›†æˆçŠ¶æ€ç®¡ç†pinia

- [piniaå®˜ç½‘](https://pinia.vuejs.org/)

å®‰è£…ï¼š
```vue
yarn add pinia
```

å®‰è£…å®Œåï¼Œåœ¨`main.js`ä¸­å¼•å…¥piniaï¼š
```javascript
import { createApp } from 'vue'
import { createPinia } from 'pinia'
...

let app = createApp(App)

app.use(createPinia())
...

app.mount('#app')
```

åœ¨srcä¸‹åˆ›å»ºä¸€ä¸ª`stores`æ–‡ä»¶å¤¹ï¼Œå†™ä¸€äº›ç¤ºä¾‹çš„çŠ¶æ€ç®¡ç†ï¼š
```javascript
// src/stores/main.js
import { defineStore } from 'pinia'

export const useMainStore = defineStore('main', {
  state: () => ({ count: 1 }),
  actions: {
    increment() {
      this.count++
    },
  },
})
```
åœ¨vueå•é¡µæ–‡ä»¶ä¸­ä½¿ç”¨ï¼š
```vue
<template lang='pug'>
div
  div {{ counter.count }}
  button(@click="increment") increment
</template>

<script setup>
import { useMainStore } from '@/stores/main'

const counter = useMainStore()

function increment() {
  // counter.count++
  // counter.$patch({ count: counter.count + 1 })
  counter.increment()
}
</script>
```

<a name="laKFr"></a>
## ä¹ã€å°è£…è¯·æ±‚ç±»
é¦–å…ˆæˆ‘ä»¬åœ¨ `config.js`ä¸­é…ç½®å…¬å…±è¯·æ±‚åœ°å€ï¼š
```json
export const globalUrl = 'http://localhost:8001'
```

ä¸ºäº†æ»¡è¶³å¤§éƒ¨åˆ†è¯·æ±‚çš„æƒ…å†µï¼Œä½¿ç”¨Mapæ˜ å°„è¡¨çš„æ–¹å¼å¤„ç†è¯·æ±‚åœ°å€ã€‚

åˆ›å»ºä¸€ä¸ªè¯·æ±‚æ˜ å°„æ–‡ä»¶ `src\api\urls.js`ï¼ŒåŸºæœ¬é…ç½®å¦‚ä¸‹ï¼š
```json
export const urls = function(type) {
  // [è¯·æ±‚åœ°å€, è¯·æ±‚æ–¹å¼, contentType]
  // contentType === 1 : 'application/x-www-form-urlencoded;charset=UTF-8'
  // contentType === 2 : 'application/json'
  let urlObj = {
    success: ['/app/success', 'get', 1],
    fail: ['/app/fail', 'get', 1],
    500: ['/app/500', 'get', 1],
    404: ['/app/404', 'get', 1],
    get: ['/app', 'get', 1],
    post: ['/app', 'post', 1],
    put: ['/app', 'put', 1],
    delete: ['/app', 'delete', 1],
  }

  return urlObj[type] || ''
}
```
è¿™é‡Œç”¨äº†ä¸€ä¸ªæ•°ç»„å­˜å‚¨ `[è¯·æ±‚åœ°å€, è¯·æ±‚æ–¹å¼, contentType] `

- è¯·æ±‚åœ°å€: é™¤å»globalUrlä»¥å¤–çš„éƒ¨åˆ†
- è¯·æ±‚æ–¹å¼: å¯ä»¥æ˜¯getã€postã€putã€deleteç­‰
- contentType: ç”¨æšä¸¾å­˜å‚¨ï¼Œä¸»è¦æ˜¯`x-www-form-urlencoded`å’Œ `json`ï¼Œå…¶ä»–ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ·»åŠ 

<a name="Ry6SS"></a>
### åŸºç¡€è¯·æ±‚ç±»
ä»¥ä¸‹æˆ‘ä½¿ç”¨äº†fetchä½œä¸ºè¯·æ±‚æ–¹æ³•ï¼Œç„¶åå°±æ˜¯åˆ›å»ºä¸€ä¸ªè§£æä¸Šé¢Mapæ˜ å°„çš„è¯·æ±‚ç±» `src\api\index.js`ï¼š
```json
import { urls } from './urls'
import { globalUrl } from '../config'

export class API {
  constructor(baseProjectUrl) {
    this.baseProjectUrl = baseProjectUrl
  }

  async resolve(
    type,
    data = {},
    options = {
      data: {},
      noPos: false,
      showErrorToast: false,
      shouldLogin: true
    }
  ) {
    let [url, method, requestType] = urls(type, options)

    if (!url.includes('http')) {
      url = this.baseProjectUrl + url
    }

    // TODO: ä»storageè·å–æˆæƒç 
    let authentication = ''

    let contentType = ''

    if (requestType === 1) {
      contentType = 'application/x-www-form-urlencoded;charset=UTF-8'
    } else {
      contentType = 'application/json'
    }

    options.data = options.data || {}
    options.data.authentication = authentication

    data = { ...options.data, ...data }

    // åˆ é™¤æ— ç”¨çš„é”®å€¼
    for (const key in data) {
      if (data[key] === undefined || data[key] === null) {
        delete data[key]
      }
    }

    let res = await fetch(url, {
      method,
      headers: {
        'Content-Type': contentType,
        authentication
      },
    })

    try {
      // é”™è¯¯çš„å¤„ç†ï¼Œæ ¹æ®å®é™…æƒ…å†µè¿›è¡Œå¤„ç†
      if (res.status === 500) {
        console.error('500: æœåŠ¡å™¨é”™è¯¯')
        throw res.status
      } else if (res.status === 404) {
        console.error('404: è¯·æ±‚èµ„æºä¸å­˜åœ¨')
        throw res.status
      } else if (res.status === 400) {
        console.error('400: å‚æ•°é”™è¯¯')
        throw res.status
      }

      // å“åº”æ­£å¸¸ï¼š200
      let resData = await res.json()
      if (Number(resData.code) === 1) {
        // æˆåŠŸè¿”å›çš„æ•°æ®ç»“æ„ï¼š
        // {"code": 1, "data": {}, "message":"æ“ä½œæˆåŠŸï¼"}
        return resData.data
      } else {
        // å¤±è´¥è¿”å›çš„æ•°æ®ç»“æ„ï¼š
        // {"code": 0, "data": {}, "message":"æ“ä½œå¤±è´¥ï¼"}
        throw resData.message
      }
    } catch (e) {
      // å¤±è´¥çš„å¤„ç†
      console.error(e)
    }
  }
}

export const api = new API(globalUrl)
```
è¿™åªæ˜¯ä¸€ä¸ªåŸºç¡€çš„è¯·æ±‚ç±»å°è£…ï¼Œåç»­å¯ä»¥æ ¹æ®ä¸šåŠ¡è¿›è¡Œæ‰©å±•ã€‚åªæœ‰ä¸€ä¸ªåŸºæœ¬æ–¹æ³•ï¼š`resolve`ï¼Œç”¨æ¥è§£æä¸Šé¢çš„é‚£ä¸ªè¯·æ±‚çš„Mapæ˜ å°„ã€‚

æˆ‘ä»¬ç”¨nest.jsåˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„æ§åˆ¶å™¨ï¼š
```json
import { Controller, Delete, Get, HttpStatus, Post, Put, Res } from '@nestjs/common';
import { Response } from 'express';
import { AppService } from './app.service';

@Controller('app')
export class AppController {
  constructor() {}

  @Get('/success')
  success() {
    return {
      code: 1,
      data: { name: 'xiaoyu', age: 18 },
      message: "æ“ä½œæˆåŠŸï¼"
    }
  }

  @Get('/fail')
  fail() {
    return {
      code: 0,
      data: {},
      message: "æ“ä½œå¤±è´¥ï¼"
    }
  }

  @Get('/500')
  serverError(@Res() res: Response) {
    res.status(HttpStatus.INTERNAL_SERVER_ERROR).send()
  }

  @Get('/404')
  notFoundError(@Res() res: Response) {
    res.status(HttpStatus.NOT_FOUND).send()
  }

  @Get()
  async query(): Promise<any> {
    return {
      code: 1,
      data: {},
      message: "æŸ¥è¯¢æˆåŠŸï¼"
    };
  }

  @Post()
  async add(): Promise<any> {
    return {
      code: 1,
      data: {},
      message: "æ·»åŠ æˆåŠŸï¼"
    };
  }

  @Delete()
  async delete(): Promise<any> {
    return {
      code: 1,
      data: {},
      message: "åˆ é™¤æˆåŠŸï¼"
    };
  }

  @Put()
  async modify(): Promise<any> {
    return {
      code: 1,
      data: {},
      message: "ä¿®æ”¹æˆåŠŸï¼"
    };
  }
}
```

åœ¨vueå•é¡µä¸­ä½¿ç”¨ï¼š
```vue
<script setup>
import { onMounted } from 'vue'
import { api } from '@/api'

onMounted(async() => {
  let res = await api.resolve('success')
  console.log(res)
})
</script>
```
è¿™é‡Œè°ƒç”¨ `api.resolve`å»è¯·æ±‚æ•°æ®ï¼Œå‚æ•°ä¸ºMapæ˜ å°„è¡¨é‡Œé¢çš„keyï¼Œresolveç›¸å½“äºåšäº†å¦‚ä¸‹ç¿»è¯‘ï¼š
```vue
ä»¥getçš„æ–¹å¼å»è¯·æ±‚æ¥å£ http://localhost:8001/app/successï¼Œè¯·æ±‚å¤´é‡Œé¢çš„content-typeä¸º'application/x-www-form-urlencoded;charset=UTF-8'
```
å¯ä»¥çœ‹åˆ°æ§åˆ¶å°æ‰“å°ï¼š
```vue
{name: 'xiaoyu', age: 18}
```

<a name="I4ufD"></a>
### è¯·æ±‚çš„å‚æ•°
<a name="NvEOv"></a>
#### æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°
æˆ‘ä»¬ä¿®æ”¹nest.jsä¸­çš„æ§åˆ¶å™¨ï¼Œè®©å…¶å¯ä»¥æ¥æ”¶æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ï¼š
```typescript
  @Get()
  async query(@Query() query: any): Promise<any> {
    return {
      code: 1,
      data: {
        id: query.id,
        name: query.name
      },
      message: "æŸ¥è¯¢æˆåŠŸï¼"
    };
  }
```
æˆ‘çš„å°è£…ç±»è¿˜éœ€è¦ä¿®æ”¹ï¼Œç”¨äºå¤„ç†queryï¼š
```typescript
import qs from 'qs'

export class API {
		...
    
		// getè¯·æ±‚æ–¹å¼ï¼Œç›´æ¥åœ¨urlä¸­æ‹¼ä¸ŠæŸ¥è¯¢å­—ç¬¦ä¸²
    if (method.toLowerCase().trim() === 'get') {
      if (data) {
        url += '?' + qs.stringify(data)
      }
    }

    let res = await fetch(url, {
      method,
      data,
      headers: {
        'Content-Type': contentType,
        authentication
      },
    })
    
    ...
}
```
åœ¨vueå•é¡µä¸­è°ƒç”¨ï¼š
```typescript
onMounted(async() => {
  let res = await api.resolve('get', {
    id: 1,
    name: 'xiaoyu'
  })
  console.log(res)
})
```
è¿™æ ·å°±å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’æŸ¥è¯¢å­—ç¬¦ä¸²äº†ã€‚

![Snipaste_2022-01-15_17-06-07.png](https://cdn.nlark.com/yuque/0/2022/png/2213540/1642237609939-30d54a72-94f6-4133-b222-a4a6fdd05218.png#clientId=u5bb28d21-66b1-4&from=drop&id=ua680767d&originHeight=153&originWidth=519&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4314&status=done&style=none&taskId=uf42247a9-7d83-47f3-81f9-549d9e177b8&title=)![Snipaste_2022-01-15_17-06-20.png](https://cdn.nlark.com/yuque/0/2022/png/2213540/1642237609954-9a0ce912-84f8-4da4-bd56-f430c99eee2c.png#clientId=u5bb28d21-66b1-4&from=drop&id=u98a41bdb&originHeight=108&originWidth=513&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3248&status=done&style=none&taskId=ueeac6d97-2359-451a-a35a-e383ce992a3&title=)

<a name="AVcXG"></a>
#### è¯·æ±‚ä½“å‚æ•°
æˆ‘ä»¬ä¿®æ”¹nest.jsä¸­çš„æ§åˆ¶å™¨ï¼Œè®©å…¶å¯ä»¥æ¥æ”¶è¯·æ±‚ä½“å‚æ•°ï¼š
```typescript
  @Post()
  async add(@Body() data: any): Promise<any> {
    return {
      code: 1,
      data: data,
      message: "æ·»åŠ æˆåŠŸï¼"
    };
  }
```
æˆ‘çš„å°è£…ç±»è¿˜éœ€è¦ä¿®æ”¹ï¼Œç”¨äºå¤„ç†è¯·æ±‚ä½“ï¼š
```typescript
import qs from 'qs'

export class API {
		...
    
		// getè¯·æ±‚æ–¹å¼ï¼Œç›´æ¥åœ¨urlä¸­æ‹¼ä¸ŠæŸ¥è¯¢å­—ç¬¦ä¸²
    let body = ''
    if (method.toLowerCase().trim() === 'get') {
      if (data) {
        url += '?' + qs.stringify(data)
      }
    } else {
      // postã€putã€deleteè¯·æ±‚æ–¹å¼ï¼Œè§£æbody
      if (requestType === 1) {
        body = qs.stringify(data)
      } else {
        body = JSON.stringify(data)
      }
    }

    let res = await fetch(url, {
      method,
      body,
      headers: {
        'Content-Type': contentType,
        authentication
      },
    })
    
    ...
}
```
å…¶ä¸­ï¼Œbodyéœ€è¦æ ¹æ®Content-Typeåšç›¸åº”çš„å¤„ç†ï¼š

- `application/x-www-form-urlencoded;charset=UTF-8` ä½¿ç”¨`qs.stringify`è§£æ
- `application/json`ä½¿ç”¨ `JSON.stringify`è§£æ

<a name="cxV8H"></a>
### é”™è¯¯å¤„ç†








<a name="z1ZcM"></a>
## åã€å¤–éƒ¨åº“



<a name="EaG6C"></a>
## åä¸€ã€å…¬å…±åº“






